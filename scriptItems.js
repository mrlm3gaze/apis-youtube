var card=document.querySelector("#index_tub"),select=document.querySelector(".slection"),card2=document.querySelector("#res_top"),country="MA",info="";function changed(t,e){card.innerHTML="",card2.innerHTML="",getTube(select.options[select.selectedIndex].value,e)}function getTube(t,e){var n,l=new Request(`https://www.googleapis.com/youtube/v3/videos?part=snippet&chart=mostpopular&regionCode=${t}&maxResults=50&key=AIzaSyBeP7xWS7fAr0-PpgaTPfuk4VXtBNKMm2g`);fetch(l).then(function(t){t.json().then(t=>{n=t.items;for(var l=0;l<n.length;l++){var a=document.createElement("li"),s=n[l].snippet.publishedAt,o=s.slice(0,10)+" | "+s.slice(11,16),c=n[l].snippet.title,i=c.replace(/['"]/gi,"mrlm3gaze"),r=encodeURIComponent(i),g=n[l].snippet.channelTitle.slice(0,30),m=n[l].snippet.channelTitle.replace(/["']/gi,"mrlm3gaze"),d=encodeURIComponent(m),p=n[l].snippet.channelId.replace(/["']/gi,"mrlm3gaze"),u=encodeURIComponent(p);if(tagsOr=n[l].snippet.tags,tags=encodeURIComponent(tagsOr).replace(/["']/gi,"mrlm3gaze"),e=n.length,desc="",h="",imageUrl="",n[l].snippet.thumbnails.high.url.onerror?imageUrl="https://kbem-recast.streamguys1.com/vendor/sgrecast/img/image-placeholder.png":imageUrl=n[l].snippet.thumbnails.high.url,n[l].snippet.description.length>300)desc=n[l].snippet.description.substring(0,300)+" ...",h=encodeURIComponent(n[l].snippet.description).replace(/['"]/gi,"mrlm3gaze");else{desc=n[l].snippet.description;var h=encodeURIComponent(desc).replace(/['"]/gi,"mrlm3gaze");""===desc?(desc="☻لا يوجد وصف لهذا الفيديو ",h=encodeURIComponent(desc)):(desc=n[l].snippet.description,h=encodeURIComponent(desc).replace(/['"]/gi,"mrlm3gaze"))}a.setAttribute("class","elments"),a.setAttribute("id",`myElem${l+1}`),a.innerHTML=`\n\t     \t\t\t   \t\t<div class="num_tend">${l+1} </div>\n\t\t\t\t\t\t\t<a href="/p/pageview.html" \n\t\t\t\t\tonclick="localStorage.setItem('url','${n[l].id}')\n\t\t\t\t\tlocalStorage.setItem('Title','${r}');localStorage.setItem('tags','${tags}');localStorage.setItem('date','${o}');localStorage.setItem('desc','${h}');localStorage.setItem('nameChannel','${d}');localStorage.setItem('LinkChannel','${u}');" target="_blink" >\n\t\t\t\t\t\t\t\t<h3 class="title_element" title="${c}">${c}</h3>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="Name_Chan">\n\t\t\t\t\t\t\t\t<a href="https://www.youtube.com/channel/${n[l].snippet.channelId}" target="_blink"><i class="material-icons">account_circle</i><strong class="name_c" title="${g}">${g}</strong>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a href="/p/pageview.html" \n\t\t\t\t\tonclick="localStorage.setItem('url','${n[l].id}')\n\t\t\t\t\tlocalStorage.setItem('Title','${r}');localStorage.setItem('tags','${tags}');localStorage.setItem('date','${o}');localStorage.setItem('desc','${h}');localStorage.setItem('nameChannel','${d}');localStorage.setItem('LinkChannel','${u}');" target="_blink" title="${c}">\n\t\t\t\t\t\t\t\t<div class="img_i">\n\t\t\t\t\t\t\t\t\t<span class="play"><i class="material-icons">play_circle_outline</i></span>\n\t\t\t\t\t\t\t\t\t<img src="${imageUrl}" class="img" alt="${c}"/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span class="pub">${o}</span>\n\t\t\t\t\t\t\t\t\t<div class="desc_p">\n\t\t\t\t\t\t\t\t\t\t<p class="desc">وصف الفيديو </p>\n\t\t\t\t\t\t\t\t\t\t<p class="para"> ${desc}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t      \t\t</div>\n\t\t\t\t\t<a class="link" title="${c}" target="_blink" href="/p/pageview.html" \n\t\t\t\t\tonclick="localStorage.setItem('url','${n[l].id}')\n\t\t\t\t\tlocalStorage.setItem('Title','${r}');localStorage.setItem('tags','${tags}');localStorage.setItem('date','${o}');localStorage.setItem('desc','${h}');localStorage.setItem('nameChannel','${d}');localStorage.setItem('LinkChannel','${u}');">مشاهدة الفيديو  </a>\n\t     \t\t\t`,card.appendChild(a)}e=void 0===e?"0":n.length;var I=document.createElement("span");I.innerHTML=`\n\t    \t\t\t<span class="res"> النتائج  : ${e} فيديو   من  أصل  ${t.pageInfo.totalResults}</span>`,card2.appendChild(I)})})}function myFunction(){var t,e,n,l;for(t=document.getElementById("myInput").value.toUpperCase(),e=document.getElementById("index_tub").getElementsByTagName("li"),l=0;l<e.length;l++)((n=e[l]).textContent||n.innerText).toUpperCase().indexOf(t)>-1?e[l].style.display="block":e[l].style.display="none"}document.addEventListener("load",getTube(country,info)),select.addEventListener("change",changed);var isNightMode=!1;function ChangeColor(){let t=document.querySelector("#mode"),e=document.getElementById("index_tub").getElementsByTagName("li"),n=document.querySelector("#top");if(isNightMode){t.innerHTML="toggle_off";for(var l=0;l<e.length;l++)e[l].classList.remove("elments2");t.style.color="#fff",n.style.color="#fff",n.style.background="#fa8231",isNightMode=!1}else if(!isNightMode){t.innerHTML="toggle_on",t.style.color="#000";for(l=0;l<e.length;l++)e[l].classList.add("elments2");n.style.color="#000",n.style.background="#777",isNightMode=!0}console.log(isNightMode)}
